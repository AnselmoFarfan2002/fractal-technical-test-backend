(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{9296:function(e,n,t){Promise.resolve().then(t.bind(t,5881))},1363:function(e,n,t){"use strict";t.d(n,{n:function(){return i}});let i=""},5881:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return v}});var i=t(7437),l=t(3226),r=t(9050),s=t(4249),o=t(4837),c=t(3216),a=t(2653),d=t(2265),u=t(1363),h=t(4033),f=t(4749),m=t(6959),x=t(6820),j=t.n(x),p=t(3528),Z=t(3027),b=t(5242),C=t(8874),P=t(1975);function k(e){let{open:n,handleClose:t,handleNewProduct:s,handleChangeProduct:o,toEdit:c}=e,a=(0,d.useRef)();return(0,i.jsx)(Z.Z,{open:n,onClose:t,children:(0,i.jsx)(b.Z,{children:(0,i.jsxs)(C.ZP,{container:!0,component:"form",spacing:2,method:"POST",ref:a,onSubmit:function(e){e.preventDefault();let n=new FormData(a.current);fetch(u.n+"/api/product"+(c?"/"+c.id:""),{method:c?"PUT":"POST",body:JSON.stringify({name:n.get("name"),price:n.get("price")}),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{t(),c?o(e):s(e)})},children:[(0,i.jsx)(C.ZP,{item:!0,xs:12,children:(0,i.jsxs)(l.Z,{variant:"h6",children:[c?"Edit":"Add"," product"]})}),(0,i.jsx)(C.ZP,{item:!0,xs:12,children:(0,i.jsx)(P.Z,{name:"name",label:"Name",fullWidth:!0,defaultValue:null==c?void 0:c.name})}),(0,i.jsx)(C.ZP,{item:!0,xs:12,children:(0,i.jsx)(P.Z,{name:"price",label:"Price",fullWidth:!0,defaultValue:null==c?void 0:c.price})}),(0,i.jsx)(C.ZP,{item:!0,xs:12,children:(0,i.jsxs)(r.Z,{type:"submit",startIcon:(0,i.jsx)(p.Z,{}),fullWidth:!0,variant:"contained",children:[c?"Save":"Add"," Product"]})})]})})})}function v(){let e=function(e){let{handleDelete:n=()=>{},handleEdit:t=()=>{}}=e;return[{field:"id",headerName:"ID"},{field:"name",headerName:"Product",flex:1},{field:"price",headerName:"Unit price",flex:1},{field:"options",headerName:"options",flex:1,renderCell:e=>{let{row:l}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Z,{onClick:()=>t(l),children:(0,i.jsx)(o.Z,{})}),(0,i.jsx)(a.Z,{onClick:()=>n(l.id),children:(0,i.jsx)(c.Z,{color:"error"})})]})},sortable:!1}]}({handleDelete:P,handleEdit:function(e){b(e),p(!0)}}),[n,t]=(0,d.useState)([]),[x,p]=(0,d.useState)(!1),[Z,b]=(0,d.useState)(null),C=(0,h.useRouter)();async function P(e){if((await j().fire({title:"Are you sure?",text:"This action is will delete the item from the list",icon:"question",showCancelButton:!0})).isConfirmed){let i=await fetch(u.n+"/api/product/"+e,{method:"DELETE"});i.ok&&(i=await i.json(),t(n.filter(n=>n.id!=e)))}}return(0,d.useEffect)(()=>{fetch(u.n+"/api/product").then(e=>e.json()).then(e=>{t(e.filter(e=>e.visible))})},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Z,{variant:"h3",mb:3,children:"Products"}),(0,i.jsx)(r.Z,{variant:"contained",sx:{mb:3},onClick:()=>p(!0),startIcon:(0,i.jsx)(f.Z,{}),children:"ADD PRODUCT"}),(0,i.jsx)(r.Z,{onClick:()=>C.push("/my-orders"),sx:{mb:3},startIcon:(0,i.jsx)(m.Z,{}),children:"Go back"}),(0,i.jsx)(s._$,{columns:e,rows:n,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,hideFooterPagination:!0,disableRowSelectionOnClick:!0}),(0,i.jsx)(k,{open:x,handleClose:()=>{p(!1),setTimeout(()=>b(null),500)},handleNewProduct:function(e){t([...n,e])},handleChangeProduct:function(e){let i=n.slice();Object.assign(i.find(n=>n.id==e.id),e),t(i)},toEdit:Z})]})}}},function(e){e.O(0,[461,944,320,251,971,938,744],function(){return e(e.s=9296)}),_N_E=e.O()}]);