(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{1230:function(e,t,n){Promise.resolve().then(n.bind(n,6964))},1363:function(e,t,n){"use strict";n.d(t,{n:function(){return i}});let i=""},6964:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var i=n(7437),r=n(3226),l=n(9050),s=n(4249),a=n(4837),d=n(3216),o=n(2653),c=n(8502),u=n(4309),h=n(2265),f=n(1363),m=n(4033),x=n(4749),j=(0,n(9782).Z)((0,i.jsx)("path",{d:"M19 13H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm0-10H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"ViewAgenda"),C=n(6820),p=n.n(C);function b(){let e=function(e){let{handleDelete:t=()=>{},handleEdit:n=()=>{},handleChangeStatus:r=()=>{}}=e;return[{field:"id",headerName:"ID"},{field:"number",headerName:"Order #",flex:1},{field:"date",headerName:"Date",flex:1,renderCell:e=>new Date(e.value).toLocaleDateString()},{field:"items",headerName:"# Products",flex:1},{field:"options",headerName:"options",flex:1,renderCell:e=>{let{row:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{onClick:()=>n(r.id),disabled:2==r.state,children:(0,i.jsx)(a.Z,{})}),(0,i.jsx)(o.Z,{onClick:()=>t(r.id),disabled:2==r.state,children:(0,i.jsx)(d.Z,{color:"error"})})]})},sortable:!1},{field:"state",headerName:"state",flex:1,renderCell:e=>{let{value:t,row:n}=e;return(0,i.jsxs)(c.Z,{disabled:2==t,value:t,fullWidth:!0,onChange:e=>r(n,e.target.value),children:[(0,i.jsx)(u.Z,{value:0,children:"Pending"}),(0,i.jsx)(u.Z,{value:1,children:"In progress"}),(0,i.jsx)(u.Z,{value:2,children:"Completed"})]})},sortable:!1}]}({handleDelete:b,handleEdit:function(e){C.push("/add-order?id="+e)},handleChangeStatus:v}),[t,n]=(0,h.useState)([]),C=(0,m.useRouter)();async function b(e){if((await p().fire({title:"Are you sure?",text:"This action is will delete the item from the list",icon:"question",showCancelButton:!0})).isConfirmed){let i=await fetch(f.n+"/api/order/"+e,{method:"DELETE"});i.ok&&(i=await i.json(),n(t.filter(t=>t.id!=e)))}}async function v(e,i){let r=t.slice();r.find(t=>t.id==e.id).state=i,await fetch(f.n+"/api/order/"+e.id,{method:"PATCH",body:JSON.stringify({state:i}),headers:{"Content-Type":"application/json"}}),n(r)}return(0,h.useEffect)(()=>{fetch(f.n+"/api/order").then(e=>e.json()).then(e=>{n(e)})},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,{variant:"h3",mb:3,children:"My Orders"}),(0,i.jsx)(l.Z,{variant:"contained",sx:{mb:3},onClick:()=>C.push("/add-order"),startIcon:(0,i.jsx)(x.Z,{}),children:"ADD ORDER"}),(0,i.jsx)(l.Z,{sx:{mb:3},onClick:()=>C.push("/products"),startIcon:(0,i.jsx)(j,{}),children:"PRODUCTS"}),(0,i.jsx)(s._$,{columns:e,rows:t,disableColumnFilter:!0,disableColumnMenu:!0,disableColumnSelector:!0,hideFooterPagination:!0,disableRowSelectionOnClick:!0})]})}}},function(e){e.O(0,[461,944,320,971,938,744],function(){return e(e.s=1230)}),_N_E=e.O()}]);